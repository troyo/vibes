var Bt=Object.defineProperty;var Jt=(m,P,V)=>P in m?Bt(m,P,{enumerable:!0,configurable:!0,writable:!0,value:V}):m[P]=V;var U=(m,P,V)=>Jt(m,typeof P!="symbol"?P+"":P,V);(function(){"use strict";const m=r=>typeof r=="string",P=()=>{let r,e;const t=new Promise((s,i)=>{r=s,e=i});return t.resolve=r,t.reject=e,t},V=r=>r==null?"":""+r,je=(r,e,t)=>{r.forEach(s=>{e[s]&&(t[s]=e[s])})},Ve=/###/g,de=r=>r&&r.indexOf("###")>-1?r.replace(Ve,"."):r,ue=r=>!r||m(r),z=(r,e,t)=>{const s=m(e)?e.split("."):e;let i=0;for(;i<s.length-1;){if(ue(r))return{};const n=de(s[i]);!r[n]&&t&&(r[n]=new t),Object.prototype.hasOwnProperty.call(r,n)?r=r[n]:r={},++i}return ue(r)?{}:{obj:r,k:de(s[i])}},fe=(r,e,t)=>{const{obj:s,k:i}=z(r,e,Object);if(s!==void 0||e.length===1){s[i]=t;return}let n=e[e.length-1],a=e.slice(0,e.length-1),o=z(r,a,Object);for(;o.obj===void 0&&a.length;)n=`${a[a.length-1]}.${n}`,a=a.slice(0,a.length-1),o=z(r,a,Object),o!=null&&o.obj&&typeof o.obj[`${o.k}.${n}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${n}`]=t},He=(r,e,t,s)=>{const{obj:i,k:n}=z(r,e,Object);i[n]=i[n]||[],i[n].push(t)},Y=(r,e)=>{const{obj:t,k:s}=z(r,e);if(t&&Object.prototype.hasOwnProperty.call(t,s))return t[s]},Ke=(r,e,t)=>{const s=Y(r,t);return s!==void 0?s:Y(e,t)},he=(r,e,t)=>{for(const s in e)s!=="__proto__"&&s!=="constructor"&&(s in r?m(r[s])||r[s]instanceof String||m(e[s])||e[s]instanceof String?t&&(r[s]=e[s]):he(r[s],e[s],t):r[s]=e[s]);return r},H=r=>r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Ue={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const ze=r=>m(r)?r.replace(/[&<>"'\/]/g,e=>Ue[e]):r;class _e{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const s=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,s),this.regExpQueue.push(e),s}}const Ge=[" ",",","?","!",";"],Be=new _e(20),Je=(r,e,t)=>{e=e||"",t=t||"";const s=Ge.filter(a=>e.indexOf(a)<0&&t.indexOf(a)<0);if(s.length===0)return!0;const i=Be.getRegExp(`(${s.map(a=>a==="?"?"\\?":a).join("|")})`);let n=!i.test(r);if(!n){const a=r.indexOf(t);a>0&&!i.test(r.substring(0,a))&&(n=!0)}return n},ie=(r,e,t=".")=>{if(!r)return;if(r[e])return Object.prototype.hasOwnProperty.call(r,e)?r[e]:void 0;const s=e.split(t);let i=r;for(let n=0;n<s.length;){if(!i||typeof i!="object")return;let a,o="";for(let l=n;l<s.length;++l)if(l!==n&&(o+=t),o+=s[l],a=i[o],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&l<s.length-1)continue;n+=l-n+1;break}i=a}return i},_=r=>r==null?void 0:r.replace("_","-"),We={type:"logger",log(r){this.output("log",r)},warn(r){this.output("warn",r)},error(r){this.output("error",r)},output(r,e){var t,s;(s=(t=console==null?void 0:console[r])==null?void 0:t.apply)==null||s.call(t,console,e)}};class q{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||We,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,s,i){return i&&!this.debug?null:(m(e[0])&&(e[0]=`${s}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new q(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new q(this.logger,e)}}var M=new q;class Q{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const i=this.observers[s].get(t)||0;this.observers[s].set(t,i+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,n])=>{for(let a=0;a<n;a++)i(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,n])=>{for(let a=0;a<n;a++)i.apply(i,[e,...t])})}}class pe extends Q{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,s,i={}){var c,d;const n=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,a=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],s&&(Array.isArray(s)?o.push(...s):m(s)&&n?o.push(...s.split(n)):o.push(s)));const l=Y(this.data,o);return!l&&!t&&!s&&e.indexOf(".")>-1&&(e=o[0],t=o[1],s=o.slice(2).join(".")),l||!a||!m(s)?l:ie((d=(c=this.data)==null?void 0:c[e])==null?void 0:d[t],s,n)}addResource(e,t,s,i,n={silent:!1}){const a=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let o=[e,t];s&&(o=o.concat(a?s.split(a):s)),e.indexOf(".")>-1&&(o=e.split("."),i=t,t=o[1]),this.addNamespaces(t),fe(this.data,o,i),n.silent||this.emit("added",e,t,s,i)}addResources(e,t,s,i={silent:!1}){for(const n in s)(m(s[n])||Array.isArray(s[n]))&&this.addResource(e,t,n,s[n],{silent:!0});i.silent||this.emit("added",e,t,s)}addResourceBundle(e,t,s,i,n,a={silent:!1,skipCopy:!1}){let o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),i=s,s=t,t=o[1]),this.addNamespaces(t);let l=Y(this.data,o)||{};a.skipCopy||(s=JSON.parse(JSON.stringify(s))),i?he(l,s,n):l={...l,...s},fe(this.data,o,l),a.silent||this.emit("added",e,t,s)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(i=>t[i]&&Object.keys(t[i]).length>0)}toJSON(){return this.data}}var ge={processors:{},addPostProcessor(r){this.processors[r.name]=r},handle(r,e,t,s,i){return r.forEach(n=>{var a;e=((a=this.processors[n])==null?void 0:a.process(e,t,s,i))??e}),e}};const me=Symbol("i18next/PATH_KEY");function Xe(){const r=[],e=Object.create(null);let t;return e.get=(s,i)=>{var n;return(n=t==null?void 0:t.revoke)==null||n.call(t),i===me?r:(r.push(i),t=Proxy.revocable(s,e),t.proxy)},Proxy.revocable(Object.create(null),e).proxy}function ne(r,e){const{[me]:t}=r(Xe());return t.join((e==null?void 0:e.keySeparator)??".")}const ye={},ae=r=>!m(r)&&typeof r!="boolean"&&typeof r!="number";class Z extends Q{constructor(e,t={}){super(),je(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=M.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const s={...t};if(e==null)return!1;const i=this.resolve(e,s);if((i==null?void 0:i.res)===void 0)return!1;const n=ae(i.res);return!(s.returnObjects===!1&&n)}extractFromKey(e,t){let s=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let n=t.ns||this.options.defaultNS||[];const a=s&&e.indexOf(s)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Je(e,s,i);if(a&&!o){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:m(n)?[n]:n};const c=e.split(s);(s!==i||s===i&&this.options.ns.indexOf(c[0])>-1)&&(n=c.shift()),e=c.join(i)}return{key:e,namespaces:m(n)?[n]:n}}translate(e,t,s){let i=typeof t=="object"?{...t}:t;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),e==null)return"";typeof e=="function"&&(e=ne(e,{...this.options,...i})),Array.isArray(e)||(e=[String(e)]);const n=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:o,namespaces:l}=this.extractFromKey(e[e.length-1],i),c=l[l.length-1];let d=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;d===void 0&&(d=":");const u=i.lng||this.language,g=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((u==null?void 0:u.toLowerCase())==="cimode")return g?n?{res:`${c}${d}${o}`,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(i)}:`${c}${d}${o}`:n?{res:o,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(i)}:o;const p=this.resolve(e,i);let f=p==null?void 0:p.res;const w=(p==null?void 0:p.usedKey)||o,k=(p==null?void 0:p.exactUsedKey)||o,C=["[object Number]","[object Function]","[object RegExp]"],S=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,T=!this.i18nFormat||this.i18nFormat.handleAsObject,h=i.count!==void 0&&!m(i.count),y=Z.hasDefaultValue(i),v=h?this.pluralResolver.getSuffix(u,i.count,i):"",b=i.ordinal&&h?this.pluralResolver.getSuffix(u,i.count,{ordinal:!1}):"",O=h&&!i.ordinal&&i.count===0,L=O&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${v}`]||i[`defaultValue${b}`]||i.defaultValue;let x=f;T&&!f&&y&&(x=L);const F=ae(x),J=Object.prototype.toString.apply(x);if(T&&x&&F&&C.indexOf(J)<0&&!(m(S)&&Array.isArray(x))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const E=this.options.returnedObjectHandler?this.options.returnedObjectHandler(w,x,{...i,ns:l}):`key '${o} (${this.language})' returned an object instead of string.`;return n?(p.res=E,p.usedParams=this.getUsedParamsDetails(i),p):E}if(a){const E=Array.isArray(x),N=E?[]:{},Ee=E?k:w;for(const $ in x)if(Object.prototype.hasOwnProperty.call(x,$)){const A=`${Ee}${a}${$}`;y&&!f?N[$]=this.translate(A,{...i,defaultValue:ae(L)?L[$]:void 0,joinArrays:!1,ns:l}):N[$]=this.translate(A,{...i,joinArrays:!1,ns:l}),N[$]===A&&(N[$]=x[$])}f=N}}else if(T&&m(S)&&Array.isArray(f))f=f.join(S),f&&(f=this.extendTranslation(f,e,i,s));else{let E=!1,N=!1;!this.isValidLookup(f)&&y&&(E=!0,f=L),this.isValidLookup(f)||(N=!0,f=o);const $=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&N?void 0:f,A=y&&L!==f&&this.options.updateMissing;if(N||E||A){if(this.logger.log(A?"updateKey":"missingKey",u,c,o,A?L:f),a){const R=this.resolve(o,{...i,keySeparator:!1});R&&R.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let W=[];const se=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&se&&se[0])for(let R=0;R<se.length;R++)W.push(se[R]);else this.options.saveMissingTo==="all"?W=this.languageUtils.toResolveHierarchy(i.lng||this.language):W.push(i.lng||this.language);const $e=(R,K,X)=>{var De;const Ae=y&&X!==f?X:$;this.options.missingKeyHandler?this.options.missingKeyHandler(R,c,K,Ae,A,i):(De=this.backendConnector)!=null&&De.saveMissing&&this.backendConnector.saveMissing(R,c,K,Ae,A,i),this.emit("missingKey",R,c,K,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&h?W.forEach(R=>{const K=this.pluralResolver.getSuffixes(R,i);O&&i[`defaultValue${this.options.pluralSeparator}zero`]&&K.indexOf(`${this.options.pluralSeparator}zero`)<0&&K.push(`${this.options.pluralSeparator}zero`),K.forEach(X=>{$e([R],o+X,i[`defaultValue${X}`]||L)})}):$e(W,o,L))}f=this.extendTranslation(f,e,i,p,s),N&&f===o&&this.options.appendNamespaceToMissingKey&&(f=`${c}${d}${o}`),(N||E)&&this.options.parseMissingKeyHandler&&(f=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}${d}${o}`:o,E?f:void 0,i))}return n?(p.res=f,p.usedParams=this.getUsedParamsDetails(i),p):f}extendTranslation(e,t,s,i,n){var l,c;if((l=this.i18nFormat)!=null&&l.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const d=m(e)&&(((c=s==null?void 0:s.interpolation)==null?void 0:c.skipOnVariables)!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let u;if(d){const p=e.match(this.interpolator.nestingRegexp);u=p&&p.length}let g=s.replace&&!m(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(g={...this.options.interpolation.defaultVariables,...g}),e=this.interpolator.interpolate(e,g,s.lng||this.language||i.usedLng,s),d){const p=e.match(this.interpolator.nestingRegexp),f=p&&p.length;u<f&&(s.nest=!1)}!s.lng&&i&&i.res&&(s.lng=this.language||i.usedLng),s.nest!==!1&&(e=this.interpolator.nest(e,(...p)=>(n==null?void 0:n[0])===p[0]&&!s.context?(this.logger.warn(`It seems you are nesting recursively key: ${p[0]} in key: ${t[0]}`),null):this.translate(...p,t),s)),s.interpolation&&this.interpolator.reset()}const a=s.postProcess||this.options.postProcess,o=m(a)?[a]:a;return e!=null&&(o!=null&&o.length)&&s.applyPostProcessor!==!1&&(e=ge.handle(o,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),e}resolve(e,t={}){let s,i,n,a,o;return m(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(s))return;const c=this.extractFromKey(l,t),d=c.key;i=d;let u=c.namespaces;this.options.fallbackNS&&(u=u.concat(this.options.fallbackNS));const g=t.count!==void 0&&!m(t.count),p=g&&!t.ordinal&&t.count===0,f=t.context!==void 0&&(m(t.context)||typeof t.context=="number")&&t.context!=="",w=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);u.forEach(k=>{var C,S;this.isValidLookup(s)||(o=k,!ye[`${w[0]}-${k}`]&&((C=this.utils)!=null&&C.hasLoadedNamespace)&&!((S=this.utils)!=null&&S.hasLoadedNamespace(o))&&(ye[`${w[0]}-${k}`]=!0,this.logger.warn(`key "${i}" for languages "${w.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),w.forEach(T=>{var v;if(this.isValidLookup(s))return;a=T;const h=[d];if((v=this.i18nFormat)!=null&&v.addLookupKeys)this.i18nFormat.addLookupKeys(h,d,T,k,t);else{let b;g&&(b=this.pluralResolver.getSuffix(T,t.count,t));const O=`${this.options.pluralSeparator}zero`,L=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(g&&(t.ordinal&&b.indexOf(L)===0&&h.push(d+b.replace(L,this.options.pluralSeparator)),h.push(d+b),p&&h.push(d+O)),f){const x=`${d}${this.options.contextSeparator||"_"}${t.context}`;h.push(x),g&&(t.ordinal&&b.indexOf(L)===0&&h.push(x+b.replace(L,this.options.pluralSeparator)),h.push(x+b),p&&h.push(x+O))}}let y;for(;y=h.pop();)this.isValidLookup(s)||(n=y,s=this.getResource(T,k,y,t))}))})}),{res:s,usedKey:i,exactUsedKey:n,usedLng:a,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,s,i={}){var n;return(n=this.i18nFormat)!=null&&n.getResource?this.i18nFormat.getResource(e,t,s,i):this.resourceStore.getResource(e,t,s,i)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=e.replace&&!m(e.replace);let i=s?e.replace:e;if(s&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!s){i={...i};for(const n of t)delete i[n]}return i}static hasDefaultValue(e){const t="defaultValue";for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t===s.substring(0,t.length)&&e[s]!==void 0)return!0;return!1}}class we{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=M.create("languageUtils")}getScriptPartFromCode(e){if(e=_(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=_(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(m(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(s=>{if(t)return;const i=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(i))&&(t=i)}),!t&&this.options.supportedLngs&&e.forEach(s=>{if(t)return;const i=this.getScriptPartFromCode(s);if(this.isSupportedCode(i))return t=i;const n=this.getLanguagePartFromCode(s);if(this.isSupportedCode(n))return t=n;t=this.options.supportedLngs.find(a=>{if(a===n)return a;if(!(a.indexOf("-")<0&&n.indexOf("-")<0)&&(a.indexOf("-")>0&&n.indexOf("-")<0&&a.substring(0,a.indexOf("-"))===n||a.indexOf(n)===0&&n.length>1))return a})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),m(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let s=e[t];return s||(s=e[this.getScriptPartFromCode(t)]),s||(s=e[this.formatLanguageCode(t)]),s||(s=e[this.getLanguagePartFromCode(t)]),s||(s=e.default),s||[]}toResolveHierarchy(e,t){const s=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),i=[],n=a=>{a&&(this.isSupportedCode(a)?i.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return m(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&n(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&n(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&n(this.getLanguagePartFromCode(e))):m(e)&&n(this.formatLanguageCode(e)),s.forEach(a=>{i.indexOf(a)<0&&n(this.formatLanguageCode(a))}),i}}const be={zero:0,one:1,two:2,few:3,many:4,other:5},xe={select:r=>r===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Ye{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=M.create("pluralResolver"),this.pluralRulesCache={}}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const s=_(e==="dev"?"en":e),i=t.ordinal?"ordinal":"cardinal",n=JSON.stringify({cleanedCode:s,type:i});if(n in this.pluralRulesCache)return this.pluralRulesCache[n];let a;try{a=new Intl.PluralRules(s,{type:i})}catch{if(typeof Intl>"u")return this.logger.error("No Intl support, please use an Intl polyfill!"),xe;if(!e.match(/-|_/))return xe;const l=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(l,t)}return this.pluralRulesCache[n]=a,a}needsPlural(e,t={}){let s=this.getRule(e,t);return s||(s=this.getRule("dev",t)),(s==null?void 0:s.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t,s={}){return this.getSuffixes(e,s).map(i=>`${t}${i}`)}getSuffixes(e,t={}){let s=this.getRule(e,t);return s||(s=this.getRule("dev",t)),s?s.resolvedOptions().pluralCategories.sort((i,n)=>be[i]-be[n]).map(i=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,t,s={}){const i=this.getRule(e,s);return i?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,s))}}const Se=(r,e,t,s=".",i=!0)=>{let n=Ke(r,e,t);return!n&&i&&m(t)&&(n=ie(r,t,s),n===void 0&&(n=ie(e,t,s))),n},re=r=>r.replace(/\$/g,"$$$$");class ke{constructor(e={}){var t;this.logger=M.create("interpolator"),this.options=e,this.format=((t=e==null?void 0:e.interpolation)==null?void 0:t.format)||(s=>s),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:s,useRawValueToEscape:i,prefix:n,prefixEscaped:a,suffix:o,suffixEscaped:l,formatSeparator:c,unescapeSuffix:d,unescapePrefix:u,nestingPrefix:g,nestingPrefixEscaped:p,nestingSuffix:f,nestingSuffixEscaped:w,nestingOptionsSeparator:k,maxReplaces:C,alwaysFormat:S}=e.interpolation;this.escape=t!==void 0?t:ze,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=n?H(n):a||"{{",this.suffix=o?H(o):l||"}}",this.formatSeparator=c||",",this.unescapePrefix=d?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=g?H(g):p||H("$t("),this.nestingSuffix=f?H(f):w||H(")"),this.nestingOptionsSeparator=k||",",this.maxReplaces=C||1e3,this.alwaysFormat=S!==void 0?S:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,s)=>(t==null?void 0:t.source)===s?(t.lastIndex=0,t):new RegExp(s,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,s,i){var p;let n,a,o;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=f=>{if(f.indexOf(this.formatSeparator)<0){const S=Se(t,l,f,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(S,void 0,s,{...i,...t,interpolationkey:f}):S}const w=f.split(this.formatSeparator),k=w.shift().trim(),C=w.join(this.formatSeparator).trim();return this.format(Se(t,l,k,this.options.keySeparator,this.options.ignoreJSONStructure),C,s,{...i,...t,interpolationkey:k})};this.resetRegExp();const d=(i==null?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,u=((p=i==null?void 0:i.interpolation)==null?void 0:p.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:f=>re(f)},{regex:this.regexp,safeValue:f=>this.escapeValue?re(this.escape(f)):re(f)}].forEach(f=>{for(o=0;n=f.regex.exec(e);){const w=n[1].trim();if(a=c(w),a===void 0)if(typeof d=="function"){const C=d(e,n,i);a=m(C)?C:""}else if(i&&Object.prototype.hasOwnProperty.call(i,w))a="";else if(u){a=n[0];continue}else this.logger.warn(`missed to pass in variable ${w} for interpolating ${e}`),a="";else!m(a)&&!this.useRawValueToEscape&&(a=V(a));const k=f.safeValue(a);if(e=e.replace(n[0],k),u?(f.regex.lastIndex+=a.length,f.regex.lastIndex-=n[0].length):f.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t,s={}){let i,n,a;const o=(l,c)=>{const d=this.nestingOptionsSeparator;if(l.indexOf(d)<0)return l;const u=l.split(new RegExp(`${H(d)}[ ]*{`));let g=`{${u[1]}`;l=u[0],g=this.interpolate(g,a);const p=g.match(/'/g),f=g.match(/"/g);(((p==null?void 0:p.length)??0)%2===0&&!f||((f==null?void 0:f.length)??0)%2!==0)&&(g=g.replace(/'/g,'"'));try{a=JSON.parse(g),c&&(a={...c,...a})}catch(w){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,w),`${l}${d}${g}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,l};for(;i=this.nestingRegexp.exec(e);){let l=[];a={...s},a=a.replace&&!m(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;const c=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(c!==-1&&(l=i[1].slice(c).split(this.formatSeparator).map(d=>d.trim()).filter(Boolean),i[1]=i[1].slice(0,c)),n=t(o.call(this,i[1].trim(),a),a),n&&i[0]===e&&!m(n))return n;m(n)||(n=V(n)),n||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),n=""),l.length&&(n=l.reduce((d,u)=>this.format(d,u,s.lng,{...s,interpolationkey:i[1].trim()}),n.trim())),e=e.replace(i[0],n),this.regexp.lastIndex=0}return e}}const qe=r=>{let e=r.toLowerCase().trim();const t={};if(r.indexOf("(")>-1){const s=r.split("(");e=s[0].toLowerCase().trim();const i=s[1].substring(0,s[1].length-1);e==="currency"&&i.indexOf(":")<0?t.currency||(t.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?t.range||(t.range=i.trim()):i.split(";").forEach(a=>{if(a){const[o,...l]=a.split(":"),c=l.join(":").trim().replace(/^'+|'+$/g,""),d=o.trim();t[d]||(t[d]=c),c==="false"&&(t[d]=!1),c==="true"&&(t[d]=!0),isNaN(c)||(t[d]=parseInt(c,10))}})}return{formatName:e,formatOptions:t}},Le=r=>{const e={};return(t,s,i)=>{let n=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(n={...n,[i.interpolationkey]:void 0});const a=s+JSON.stringify(n);let o=e[a];return o||(o=r(_(s),i),e[a]=o),o(t)}},Qe=r=>(e,t,s)=>r(_(t),s)(e);class Ze{constructor(e={}){this.logger=M.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const s=t.cacheInBuiltFormats?Le:Qe;this.formats={number:s((i,n)=>{const a=new Intl.NumberFormat(i,{...n});return o=>a.format(o)}),currency:s((i,n)=>{const a=new Intl.NumberFormat(i,{...n,style:"currency"});return o=>a.format(o)}),datetime:s((i,n)=>{const a=new Intl.DateTimeFormat(i,{...n});return o=>a.format(o)}),relativetime:s((i,n)=>{const a=new Intl.RelativeTimeFormat(i,{...n});return o=>a.format(o,n.range||"day")}),list:s((i,n)=>{const a=new Intl.ListFormat(i,{...n});return o=>a.format(o)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Le(t)}format(e,t,s,i={}){const n=t.split(this.formatSeparator);if(n.length>1&&n[0].indexOf("(")>1&&n[0].indexOf(")")<0&&n.find(o=>o.indexOf(")")>-1)){const o=n.findIndex(l=>l.indexOf(")")>-1);n[0]=[n[0],...n.splice(1,o)].join(this.formatSeparator)}return n.reduce((o,l)=>{var u;const{formatName:c,formatOptions:d}=qe(l);if(this.formats[c]){let g=o;try{const p=((u=i==null?void 0:i.formatParams)==null?void 0:u[i.interpolationkey])||{},f=p.locale||p.lng||i.locale||i.lng||s;g=this.formats[c](o,f,{...d,...i,...p})}catch(p){this.logger.warn(p)}return g}else this.logger.warn(`there was no format function for ${c}`);return o},e)}}const et=(r,e)=>{r.pending[e]!==void 0&&(delete r.pending[e],r.pendingCount--)};class tt extends Q{constructor(e,t,s,i={}){var n,a;super(),this.backend=e,this.store=t,this.services=s,this.languageUtils=s.languageUtils,this.options=i,this.logger=M.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],(a=(n=this.backend)==null?void 0:n.init)==null||a.call(n,s,i.backend,i)}queueLoad(e,t,s,i){const n={},a={},o={},l={};return e.forEach(c=>{let d=!0;t.forEach(u=>{const g=`${c}|${u}`;!s.reload&&this.store.hasResourceBundle(c,u)?this.state[g]=2:this.state[g]<0||(this.state[g]===1?a[g]===void 0&&(a[g]=!0):(this.state[g]=1,d=!1,a[g]===void 0&&(a[g]=!0),n[g]===void 0&&(n[g]=!0),l[u]===void 0&&(l[u]=!0)))}),d||(o[c]=!0)}),(Object.keys(n).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(n),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(l)}}loaded(e,t,s){const i=e.split("|"),n=i[0],a=i[1];t&&this.emit("failedLoading",n,a,t),!t&&s&&this.store.addResourceBundle(n,a,s,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&s&&(this.state[e]=0);const o={};this.queue.forEach(l=>{He(l.loaded,[n],a),et(l,e),t&&l.errors.push(t),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(c=>{o[c]||(o[c]={});const d=l.loaded[c];d.length&&d.forEach(u=>{o[c][u]===void 0&&(o[c][u]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(l=>!l.done)}read(e,t,s,i=0,n=this.retryTimeout,a){if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:s,tried:i,wait:n,callback:a});return}this.readingCalls++;const o=(c,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const u=this.waitingReads.shift();this.read(u.lng,u.ns,u.fcName,u.tried,u.wait,u.callback)}if(c&&d&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,s,i+1,n*2,a)},n);return}a(c,d)},l=this.backend[s].bind(this.backend);if(l.length===2){try{const c=l(e,t);c&&typeof c.then=="function"?c.then(d=>o(null,d)).catch(o):o(null,c)}catch(c){o(c)}return}return l(e,t,o)}prepareLoading(e,t,s={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();m(e)&&(e=this.languageUtils.toResolveHierarchy(e)),m(t)&&(t=[t]);const n=this.queueLoad(e,t,s,i);if(!n.toLoad.length)return n.pending.length||i(),null;n.toLoad.forEach(a=>{this.loadOne(a)})}load(e,t,s){this.prepareLoading(e,t,{},s)}reload(e,t,s){this.prepareLoading(e,t,{reload:!0},s)}loadOne(e,t=""){const s=e.split("|"),i=s[0],n=s[1];this.read(i,n,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${t}loading namespace ${n} for language ${i} failed`,a),!a&&o&&this.logger.log(`${t}loaded namespace ${n} for language ${i}`,o),this.loaded(e,a,o)})}saveMissing(e,t,s,i,n,a={},o=()=>{}){var l,c,d,u,g;if((c=(l=this.services)==null?void 0:l.utils)!=null&&c.hasLoadedNamespace&&!((u=(d=this.services)==null?void 0:d.utils)!=null&&u.hasLoadedNamespace(t))){this.logger.warn(`did not save key "${s}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if((g=this.backend)!=null&&g.create){const p={...a,isUpdate:n},f=this.backend.create.bind(this.backend);if(f.length<6)try{let w;f.length===5?w=f(e,t,s,i,p):w=f(e,t,s,i),w&&typeof w.then=="function"?w.then(k=>o(null,k)).catch(o):o(null,w)}catch(w){o(w)}else f(e,t,s,i,o,p)}!e||!e[0]||this.store.addResource(e[0],t,s,i)}}}const oe=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:r=>{let e={};if(typeof r[1]=="object"&&(e=r[1]),m(r[1])&&(e.defaultValue=r[1]),m(r[2])&&(e.tDescription=r[2]),typeof r[2]=="object"||typeof r[3]=="object"){const t=r[3]||r[2];Object.keys(t).forEach(s=>{e[s]=t[s]})}return e},interpolation:{escapeValue:!0,format:r=>r,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),ve=r=>{var e,t;return m(r.ns)&&(r.ns=[r.ns]),m(r.fallbackLng)&&(r.fallbackLng=[r.fallbackLng]),m(r.fallbackNS)&&(r.fallbackNS=[r.fallbackNS]),((t=(e=r.supportedLngs)==null?void 0:e.indexOf)==null?void 0:t.call(e,"cimode"))<0&&(r.supportedLngs=r.supportedLngs.concat(["cimode"])),typeof r.initImmediate=="boolean"&&(r.initAsync=r.initImmediate),r},ee=()=>{},st=r=>{Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(t=>{typeof r[t]=="function"&&(r[t]=r[t].bind(r))})};let Oe=!1;const it=r=>{var e,t,s,i,n,a,o,l,c;return!!(((s=(t=(e=r==null?void 0:r.modules)==null?void 0:e.backend)==null?void 0:t.name)==null?void 0:s.indexOf("Locize"))>0||((o=(a=(n=(i=r==null?void 0:r.modules)==null?void 0:i.backend)==null?void 0:n.constructor)==null?void 0:a.name)==null?void 0:o.indexOf("Locize"))>0||(c=(l=r==null?void 0:r.options)==null?void 0:l.backend)!=null&&c.backends&&r.options.backend.backends.some(d=>{var u,g,p;return((u=d==null?void 0:d.name)==null?void 0:u.indexOf("Locize"))>0||((p=(g=d==null?void 0:d.constructor)==null?void 0:g.name)==null?void 0:p.indexOf("Locize"))>0}))};class G extends Q{constructor(e={},t){if(super(),this.options=ve(e),this.services={},this.logger=M,this.modules={external:[]},st(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(m(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const s=oe();this.options={...s,...this.options,...ve(e)},this.options.interpolation={...s.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=s.overloadTranslationOptionHandler),this.options.showSupportNotice!==!1&&!it(this)&&!Oe&&(typeof console<"u"&&typeof console.info<"u"&&console.info("ðŸŒ i18next is maintained with support from Locize â€” consider powering your project with managed localization (AI, CDN, integrations): https://locize.com ðŸ’™"),Oe=!0);const i=c=>c?typeof c=="function"?new c:c:null;if(!this.options.isClone){this.modules.logger?M.init(i(this.modules.logger),this.options):M.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:c=Ze;const d=new we(this.options);this.store=new pe(this.options.resources,this.options);const u=this.services;u.logger=M,u.resourceStore=this.store,u.languageUtils=d,u.pluralResolver=new Ye(d,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),c&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(u.formatter=i(c),u.formatter.init&&u.formatter.init(u,this.options),this.options.interpolation.format=u.formatter.format.bind(u.formatter)),u.interpolator=new ke(this.options),u.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},u.backendConnector=new tt(i(this.modules.backend),u.resourceStore,u,this.options),u.backendConnector.on("*",(p,...f)=>{this.emit(p,...f)}),this.modules.languageDetector&&(u.languageDetector=i(this.modules.languageDetector),u.languageDetector.init&&u.languageDetector.init(u,this.options.detection,this.options)),this.modules.i18nFormat&&(u.i18nFormat=i(this.modules.i18nFormat),u.i18nFormat.init&&u.i18nFormat.init(this)),this.translator=new Z(this.services,this.options),this.translator.on("*",(p,...f)=>{this.emit(p,...f)}),this.modules.external.forEach(p=>{p.init&&p.init(this)})}if(this.format=this.options.interpolation.format,t||(t=ee),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=(...d)=>this.store[c](...d)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=(...d)=>(this.store[c](...d),this)});const o=P(),l=()=>{const c=(d,u)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(u),t(d,u)};if(this.languages&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)};return this.options.resources||!this.options.initAsync?l():setTimeout(l,0),o}loadResources(e,t=ee){var n,a;let s=t;const i=m(e)?e:this.language;if(typeof e=="function"&&(s=e),!this.options.resources||this.options.partialBundledLanguages){if((i==null?void 0:i.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const o=[],l=c=>{if(!c||c==="cimode")return;this.services.languageUtils.toResolveHierarchy(c).forEach(u=>{u!=="cimode"&&o.indexOf(u)<0&&o.push(u)})};i?l(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>l(d)),(a=(n=this.options.preload)==null?void 0:n.forEach)==null||a.call(n,c=>l(c)),this.services.backendConnector.load(o,this.options.ns,c=>{!c&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(c)})}else s(null)}reloadResources(e,t,s){const i=P();return typeof e=="function"&&(s=e,e=void 0),typeof t=="function"&&(s=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),s||(s=ee),this.services.backendConnector.reload(e,t,n=>{i.resolve(),s(n)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&ge.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const s=this.languages[t];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const s=P();this.emit("languageChanging",e);const i=o=>{this.language=o,this.languages=this.services.languageUtils.toResolveHierarchy(o),this.resolvedLanguage=void 0,this.setResolvedLanguage(o)},n=(o,l)=>{l?this.isLanguageChangingTo===e&&(i(l),this.translator.changeLanguage(l),this.isLanguageChangingTo=void 0,this.emit("languageChanged",l),this.logger.log("languageChanged",l)):this.isLanguageChangingTo=void 0,s.resolve((...c)=>this.t(...c)),t&&t(o,(...c)=>this.t(...c))},a=o=>{var d,u;!e&&!o&&this.services.languageDetector&&(o=[]);const l=m(o)?o:o&&o[0],c=this.store.hasLanguageSomeTranslations(l)?l:this.services.languageUtils.getBestMatchFromCodes(m(o)?[o]:o);c&&(this.language||i(c),this.translator.language||this.translator.changeLanguage(c),(u=(d=this.services.languageDetector)==null?void 0:d.cacheUserLanguage)==null||u.call(d,c)),this.loadResources(c,g=>{n(g,c)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),s}getFixedT(e,t,s){const i=(n,a,...o)=>{let l;typeof a!="object"?l=this.options.overloadTranslationOptionHandler([n,a].concat(o)):l={...a},l.lng=l.lng||i.lng,l.lngs=l.lngs||i.lngs,l.ns=l.ns||i.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||s||i.keyPrefix);const c=this.options.keySeparator||".";let d;return l.keyPrefix&&Array.isArray(n)?d=n.map(u=>(typeof u=="function"&&(u=ne(u,{...this.options,...a})),`${l.keyPrefix}${c}${u}`)):(typeof n=="function"&&(n=ne(n,{...this.options,...a})),d=l.keyPrefix?`${l.keyPrefix}${c}${n}`:n),this.t(d,l)};return m(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=s,i}t(...e){var t;return(t=this.translator)==null?void 0:t.translate(...e)}exists(...e){var t;return(t=this.translator)==null?void 0:t.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=t.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,n=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const a=(o,l)=>{const c=this.services.backendConnector.state[`${o}|${l}`];return c===-1||c===0||c===2};if(t.precheck){const o=t.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(s,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(s,e)&&(!i||a(n,e)))}loadNamespaces(e,t){const s=P();return this.options.ns?(m(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{s.resolve(),t&&t(i)}),s):(t&&t(),Promise.resolve())}loadLanguages(e,t){const s=P();m(e)&&(e=[e]);const i=this.options.preload||[],n=e.filter(a=>i.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return n.length?(this.options.preload=i.concat(n),this.loadResources(a=>{s.resolve(),t&&t(a)}),s):(t&&t(),Promise.resolve())}dir(e){var i,n;if(e||(e=this.resolvedLanguage||(((i=this.languages)==null?void 0:i.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const a=new Intl.Locale(e);if(a&&a.getTextInfo){const o=a.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=((n=this.services)==null?void 0:n.languageUtils)||new we(oe());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(s.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){const s=new G(e,t);return s.createInstance=G.createInstance,s}cloneInstance(e={},t=ee){const s=e.forkResourceStore;s&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},n=new G(i);if((e.debug!==void 0||e.prefix!==void 0)&&(n.logger=n.logger.clone(e)),["store","services","language"].forEach(o=>{n[o]=this[o]}),n.services={...this.services},n.services.utils={hasLoadedNamespace:n.hasLoadedNamespace.bind(n)},s){const o=Object.keys(this.store.data).reduce((l,c)=>(l[c]={...this.store.data[c]},l[c]=Object.keys(l[c]).reduce((d,u)=>(d[u]={...l[c][u]},d),l[c]),l),{});n.store=new pe(o,i),n.services.resourceStore=n.store}if(e.interpolation){const l={...oe().interpolation,...this.options.interpolation,...e.interpolation},c={...i,interpolation:l};n.services.interpolator=new ke(c)}return n.translator=new Z(n.services,i),n.translator.on("*",(o,...l)=>{n.emit(o,...l)}),n.init(i,t),n.translator.options=i,n.translator.backendConnector.services.utils={hasLoadedNamespace:n.hasLoadedNamespace.bind(n)},n}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const I=G.createInstance();I.createInstance,I.dir,I.init,I.loadResources,I.reloadResources,I.use,I.changeLanguage,I.getFixedT,I.t,I.exists,I.setDefaultNamespace,I.hasLoadedNamespace,I.loadNamespaces,I.loadLanguages;let nt=!1;try{document.cookie,nt=!0}catch{}const at=["en","fr","de","es","it","pl","pt","nl","sv","ru","ar","zh","ja","tr","th","vi"];new Set(at);const rt=.5,ot=new Set(["the","a","an","and","or","but","in","on","at","to","for","of","with","by","from","as","is","was","are","were","been","be","have","has","had","do","does","did","will","would","could","should","may","might","must","shall","can","need","it","its","this","that","these","those","i","you","he","she","we","they","what","which","who","whom","how","when","where","why","all","each","every","both","few","more","most","other","some","such","no","not","only","same","so","than","too","very","just","also","now","new","says","said","after"]),lt=5,ct=2,Ce=3,dt=1.5,ut=new Set(["CL=F","NG=F"]),ft=["pipeline","pipelines","line","terminal"],ht=["flow","throughput","capacity","outage","leak","rupture","shutdown","maintenance","curtailment","force majeure","halt","halted","reduced","reduction","drop","offline","suspend","suspended","stoppage"],pt=["iran","israel","ukraine","russia","china","taiwan","oil","crypto","fed","interest","inflation","recession","war","sanctions","tariff","ai","tech","layoff","trump","biden","election"],Te=new Set(["ai","app","api","new","top","big","ceo","cto","update","report","latest","breaking","analysis","reuters","exclusive","opinion","editorial","watch","live","video","photo","photos","read","full","source","sources","according","ahead","english","times","post","news","press","media","journal","morning","evening","daily","weekly","monthly","newsletter","subscribe","podcast","interview","says","said","tells","told","calls","called","makes","made","takes","took","gets","gives","gave","goes","went","comes","came","puts","sets","set","shows","shown","finds","found","keeps","kept","holds","held","runs","turns","turned","leads","led","brings","brought","starts","started","moves","moved","plans","planned","wants","wanted","needs","needed","looks","looked","works","worked","tries","tried","asks","asked","uses","used","expects","expected","reports","reported","claims","claimed","warns","warned","reveals","revealed","announces","announced","confirms","confirmed","denies","denied","launches","launched","signs","signed","faces","faced","seeks","sought","hits","hit","dies","died","killed","kills","rises","rose","falls","fell","wins","won","lost","ends","ended","begins","began","opens","opened","closes","closed","raises","raised","cuts","cut","adds","added","drops","dropped","pushes","pushed","pulls","pulled","backs","backed","blocks","blocked","passes","passed","votes","voted","joins","joined","leaves","left","returns","returned","sends","sent","urges","urged","vows","vowed","pledges","pledged","rejects","rejected","approves","approved","first","last","next","major","former","still","despite","amid","over","under","back","year","years","day","days","week","weeks","month","months","time","long","high","low","part","early","late","key","two","three","four","five","million","billion","percent","nearly","almost","already","just","even","since","while","during","before","between","again","against","into","through","around","about","much","many","several","second","third","possible","likely","least","best","worst","largest","biggest","smallest","highest","lowest","record","global","local","state","states","department","officials","official","country","countries","people","group","groups","plan","deal","talks","move","order","case","house","court","secretary","board","control","bank","power","leader","leaders","government","minister","president","agency","market","markets","company","companies","world","white","head","side","point","end","line","area","number","issue","issues","policy","security","force","forces","system","service","services","program","project","effort","action","support","level","rate","rates","price","prices","trade","growth","change","changes","crisis","risk","impact","future","history","data","team","member","members","office","sector","region","regions","center","role","south","north","east","west","eastern","western","southern","northern","central","middle","united","national","international","federal","say","get","give","go","come","put","take","make","know","think","see","want","look","find","tell","ask","use","try","leave","call","keep","let","begin","show","hear","play","run","move","help","turn","start","hold","bring","write","provide","sit","stand","lose","pay","meet","include","continue","learn","lead","believe","feel","follow","stop","speak","allow","add","grow","open","walk","win","offer","appear","buy","wait","serve","die","send","build","stay","fall","reach","remain","suggest","raise","sell","require","decide","develop","break","happen","create","live","000","100","200","500","per","than","trading","stock","earnings","finance","defi","ipo","tradingview","currency","dollar","usd","investing","equity","valuation","ecb","regulation","outlook","forecast","financial","com","platform","block","focus","today","chief","basel","ongoing","higher","poised","track","wall","street","financialcontent","ray","msn","aol","2025","2026","2027","january","february","march","april","may","june","july","august","september","october","november","december","goldman","sachs","off","here","there","where","when","what","which","who","whom","this","that","these","those","been","being","have","has","had","having","does","done","doing","would","could","should","will","shall","might","must","also","more","most","some","other","only","very","after","with","from","they","them","their","then","now","how","all","each","every","both","few","own","same","such","too","any","well"]),gt={iran:["iran","israel","oil","sanctions"],israel:["israel","iran","war","gaza"],ukraine:["ukraine","russia","war","nato"],russia:["russia","ukraine","sanctions"],china:["china","taiwan","tariff","trade"],taiwan:["taiwan","china"],trump:["trump","election","tariff"],fed:["fed","interest","inflation","recession"],bitcoin:["crypto","bitcoin"],recession:["recession","fed","inflation"]};function mt(r){const e=r.toLowerCase().replace(/[^a-z0-9\s]/g," ").split(/\s+/).filter(t=>t.length>2&&!ot.has(t));return new Set(e)}function yt(r,e){if(r.size===0&&e.size===0)return 0;const t=new Set([...r].filter(i=>e.has(i))),s=new Set([...r,...e]);return t.size/s.size}function Ie(r,e){return e.some(t=>r.includes(t))}function wt(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Pe(r,e){const t=e.trim().toLowerCase();return t?new RegExp(`\\b${wt(t)}\\b`,"i").test(r):!1}function bt(r){const e=r.toLowerCase(),t=[];for(const[s,i]of Object.entries(gt))Pe(e,s)&&t.push(...i);return[...new Set(t)]}function D(){return`sig-${Date.now()}-${Math.random().toString(36).slice(2,8)}`}function j(r,e,t){if(["silent_divergence","flow_price_divergence","explained_market_move"].includes(r))return`${r}:${e}`;const i=Math.round(t*10)/10;return`${r}:${e}:${i}`}const xt=[{id:"^GSPC",type:"index",name:"S&P 500",aliases:["s&p","s&p 500","sp500","spx","spy"],keywords:["market","stocks","wall street","equities"],related:["^DJI","^IXIC"]},{id:"^DJI",type:"index",name:"Dow Jones",aliases:["dow","dow jones","djia","dow 30"],keywords:["blue chip","industrials","market"],related:["^GSPC","^IXIC"]},{id:"^IXIC",type:"index",name:"NASDAQ",aliases:["nasdaq","nasdaq composite","qqq","tech index"],keywords:["tech stocks","growth","technology"],related:["^GSPC","XLK"]},{id:"AAPL",type:"company",name:"Apple Inc.",aliases:["apple","aapl","tim cook","iphone","ipad","mac"],keywords:["iphone","ios","app store","macbook","vision pro","services","wearables"],sector:"Technology",related:["MSFT","GOOGL","TSM"]},{id:"MSFT",type:"company",name:"Microsoft Corporation",aliases:["microsoft","msft","satya nadella","windows","azure","xbox"],keywords:["azure","cloud","windows","office","copilot","openai","teams","github"],sector:"Technology",related:["AAPL","GOOGL","AMZN","NVDA"]},{id:"NVDA",type:"company",name:"NVIDIA Corporation",aliases:["nvidia","nvda","jensen huang","geforce"],keywords:["gpu","ai chip","datacenter","cuda","h100","blackwell","artificial intelligence","gaming","graphics"],sector:"Technology",related:["AMD","TSM","AVGO","INTC","MSFT"]},{id:"GOOGL",type:"company",name:"Alphabet Inc.",aliases:["google","alphabet","googl","goog","sundar pichai","youtube"],keywords:["search","ads","android","chrome","gemini","waymo","cloud","ai"],sector:"Technology",related:["META","MSFT","AAPL","AMZN"]},{id:"AMZN",type:"company",name:"Amazon.com Inc.",aliases:["amazon","amzn","aws","andy jassy","jeff bezos","prime"],keywords:["ecommerce","cloud","aws","prime","alexa","warehouse","logistics","retail"],sector:"Technology",related:["MSFT","GOOGL","WMT","COST"]},{id:"META",type:"company",name:"Meta Platforms Inc.",aliases:["meta","facebook","fb","mark zuckerberg","zuckerberg","instagram","whatsapp"],keywords:["social media","metaverse","vr","reels","advertising","llama","ai"],sector:"Technology",related:["GOOGL","SNAP","PINS"]},{id:"TSM",type:"company",name:"Taiwan Semiconductor",aliases:["tsmc","tsm","taiwan semi","taiwan semiconductor"],keywords:["chip","foundry","semiconductor","fab","wafer","node","nanometer","taiwan"],sector:"Technology",related:["NVDA","AMD","AAPL","AVGO","INTC"]},{id:"AVGO",type:"company",name:"Broadcom Inc.",aliases:["broadcom","avgo","avago","hock tan"],keywords:["chip","semiconductor","wireless","5g","networking","infrastructure","vmware","enterprise"],sector:"Technology",related:["NVDA","QCOM","TSM","INTC"]},{id:"ORCL",type:"company",name:"Oracle Corporation",aliases:["oracle","orcl","larry ellison","ellison"],keywords:["database","cloud","enterprise","java","erp","saas"],sector:"Technology",related:["MSFT","SAP","CRM"]},{id:"NFLX",type:"company",name:"Netflix Inc.",aliases:["netflix","nflx"],keywords:["streaming","entertainment","movies","series","subscription","content"],sector:"Technology",related:["DIS","WBD","PARA"]},{id:"LMT",type:"company",name:"Lockheed Martin",aliases:["lockheed","lockheed martin","lmt","skunk works"],keywords:["f-35","defense","missile","aerospace","himars","javeline"],sector:"Defense",related:["RTX","NOC","GD","BA"]},{id:"RTX",type:"company",name:"RTX Corp",aliases:["raytheon","rtx","pratt & whitney","collins aerospace"],keywords:["missile","patriot","defense","radar","engine"],sector:"Defense",related:["LMT","NOC","GD"]},{id:"NOC",type:"company",name:"Northrop Grumman",aliases:["northrop","northrop grumman","noc"],keywords:["b-21","bomber","space","defense","drone"],sector:"Defense",related:["LMT","RTX","L3H"]},{id:"BA",type:"company",name:"Boeing",aliases:["boeing","ba"],keywords:["airplane","737 max","defense","space","starliner"],sector:"Defense",related:["AIR.PA","LMT"]},{id:"GD",type:"company",name:"General Dynamics",aliases:["general dynamics","gd"],keywords:["submarine","tank","abrams","gulfstream","defense"],sector:"Defense",related:["LMT","HII"]},{id:"RHM.DE",type:"company",name:"Rheinmetall AG",aliases:["rheinmetall","rhm"],keywords:["tank","leopard","ammunition","defense","germany"],sector:"Defense",related:["KMW","BAE.L"]},{id:"AIR.PA",type:"company",name:"Airbus SE",aliases:["airbus","eads"],keywords:["airplane","defense","helicopter","space","europe"],sector:"Defense",related:["BA","SAF.PA"]},{id:"ASML",type:"company",name:"ASML Holding",aliases:["asml"],keywords:["lithography","euv","duv","chip equipment","semiconductor"],sector:"Technology",related:["TSM","INTC","SAMSUNG"]},{id:"005930.KS",type:"company",name:"Samsung Electronics",aliases:["samsung","samsung electronics"],keywords:["memory","chip","phone","display","foundry"],sector:"Technology",related:["SK hynix","AAPL","TSM"]},{id:"ALB",type:"company",name:"Albemarle",aliases:["albemarle","alb"],keywords:["lithium","battery","ev","mining"],sector:"Materials",related:["SQM","TSLA"]},{id:"SQM",type:"company",name:"SQM",aliases:["sqm","sociedad quimica"],keywords:["lithium","chile","mining","battery"],sector:"Materials",related:["ALB"]},{id:"MP",type:"company",name:"MP Materials",aliases:["mp materials","mountain pass"],keywords:["rare earth","neodymium","magnet","mining","china alternative"],sector:"Materials",related:["ARE"]},{id:"FCX",type:"company",name:"Freeport-McMoRan",aliases:["freeport","fcx"],keywords:["copper","gold","mining","indonesia","grasberg"],sector:"Materials",related:["SCCO","RIO"]},{id:"BRK-B",type:"company",name:"Berkshire Hathaway",aliases:["berkshire","berkshire hathaway","brk","warren buffett","buffett","charlie munger"],keywords:["insurance","investing","conglomerate","value"],sector:"Finance",related:["JPM","BAC","GS"]},{id:"JPM",type:"company",name:"JPMorgan Chase",aliases:["jpmorgan","jp morgan","jpm","chase","jamie dimon","dimon"],keywords:["bank","banking","investment bank","credit","loans","interest rate"],sector:"Finance",related:["BAC","GS","MS","C"]},{id:"V",type:"company",name:"Visa Inc.",aliases:["visa"],keywords:["payments","credit card","debit","transaction","fintech"],sector:"Finance",related:["MA","AXP","PYPL"]},{id:"MA",type:"company",name:"Mastercard Inc.",aliases:["mastercard","master card"],keywords:["payments","credit card","debit","transaction","fintech"],sector:"Finance",related:["V","AXP","PYPL"]},{id:"BAC",type:"company",name:"Bank of America",aliases:["bank of america","bofa","bac","boa"],keywords:["bank","banking","mortgage","loans","credit","interest rate"],sector:"Finance",related:["JPM","WFC","C"]},{id:"LLY",type:"company",name:"Eli Lilly",aliases:["eli lilly","lilly","lly"],keywords:["pharma","drug","ozempic","diabetes","obesity","weight loss","mounjaro","zepbound"],sector:"Healthcare",related:["NVO","PFE","MRK","JNJ"]},{id:"UNH",type:"company",name:"UnitedHealth Group",aliases:["unitedhealth","united health","unh","optum"],keywords:["insurance","healthcare","managed care","medicare","medicaid"],sector:"Healthcare",related:["CVS","CI","HUM"]},{id:"NVO",type:"company",name:"Novo Nordisk",aliases:["novo nordisk","novo","nvo"],keywords:["pharma","drug","ozempic","wegovy","diabetes","obesity","glp-1","weight loss"],sector:"Healthcare",related:["LLY","PFE","MRK"]},{id:"JNJ",type:"company",name:"Johnson & Johnson",aliases:["johnson johnson","j&j","jnj","johnson and johnson"],keywords:["pharma","medical devices","consumer health","vaccine"],sector:"Healthcare",related:["PFE","MRK","ABT"]},{id:"XOM",type:"company",name:"Exxon Mobil",aliases:["exxon","exxonmobil","exxon mobil","xom","mobil"],keywords:["oil","gas","drilling","refinery","petroleum","energy","fossil fuel"],sector:"Energy",related:["CVX","COP","CL=F"]},{id:"TSLA",type:"company",name:"Tesla Inc.",aliases:["tesla","tsla","elon musk","musk"],keywords:["ev","electric vehicle","battery","autopilot","fsd","robotaxi","energy storage","solar"],sector:"Consumer",related:["RIVN","LCID","F","GM"]},{id:"WMT",type:"company",name:"Walmart Inc.",aliases:["walmart","wmt","wal-mart"],keywords:["retail","grocery","ecommerce","stores","consumer","discount"],sector:"Consumer",related:["COST","TGT","AMZN"]},{id:"COST",type:"company",name:"Costco Wholesale",aliases:["costco","cost"],keywords:["retail","wholesale","membership","grocery","warehouse"],sector:"Consumer",related:["WMT","TGT","BJ"]},{id:"HD",type:"company",name:"Home Depot",aliases:["home depot","hd","homedepot"],keywords:["retail","home improvement","construction","housing","diy"],sector:"Consumer",related:["LOW","WMT"]},{id:"PG",type:"company",name:"Procter & Gamble",aliases:["procter gamble","p&g","pg","procter & gamble","procter and gamble"],keywords:["consumer goods","household","personal care","detergent","beauty"],sector:"Consumer",related:["KO","PEP","CL","UL"]},{id:"XLK",type:"sector",name:"Technology Select Sector",aliases:["tech sector","technology sector","xlk"],keywords:["tech","software","hardware","it"],related:["AAPL","MSFT","NVDA"]},{id:"XLF",type:"sector",name:"Financial Select Sector",aliases:["finance sector","financial sector","xlf","banks"],keywords:["bank","insurance","financial"],related:["JPM","BAC","V"]},{id:"XLE",type:"sector",name:"Energy Select Sector",aliases:["energy sector","xle","oil stocks"],keywords:["oil","gas","energy","drilling"],related:["XOM","CVX","CL=F"]},{id:"XLV",type:"sector",name:"Health Care Select Sector",aliases:["healthcare sector","health sector","xlv","pharma stocks"],keywords:["pharma","biotech","healthcare","medical"],related:["LLY","UNH","JNJ"]},{id:"SMH",type:"sector",name:"Semiconductor ETF",aliases:["semis","semiconductor sector","smh","chip stocks"],keywords:["chip","semiconductor","foundry","fab"],related:["NVDA","TSM","AVGO","AMD"]},{id:"^VIX",type:"commodity",name:"VIX Volatility Index",aliases:["vix","fear index","volatility"],keywords:["volatility","fear","uncertainty","hedging","options"],related:["^GSPC"]},{id:"GC=F",type:"commodity",name:"Gold Futures",aliases:["gold","xau","bullion"],keywords:["precious metal","safe haven","inflation hedge","bullion","jewelry"],related:["SI=F","GLD"]},{id:"CL=F",type:"commodity",name:"Crude Oil WTI",aliases:["oil","crude","wti","crude oil","petroleum","brent"],keywords:["opec","drilling","refinery","barrel","pipeline","energy","gasoline","fuel"],related:["NG=F","XOM","CVX","XLE"]},{id:"NG=F",type:"commodity",name:"Natural Gas Futures",aliases:["natural gas","natgas","gas"],keywords:["lng","pipeline","heating","energy","utility"],related:["CL=F","XLE"]},{id:"SI=F",type:"commodity",name:"Silver Futures",aliases:["silver","xag"],keywords:["precious metal","industrial metal","solar","electronics"],related:["GC=F","HG=F"]},{id:"HG=F",type:"commodity",name:"Copper Futures",aliases:["copper"],keywords:["industrial metal","construction","wiring","ev","infrastructure"],related:["SI=F","GC=F"]},{id:"bitcoin",type:"crypto",name:"Bitcoin",aliases:["bitcoin","btc","satoshi"],keywords:["cryptocurrency","blockchain","digital currency","halving","btc mining"],related:["ethereum","solana"]},{id:"ethereum",type:"crypto",name:"Ethereum",aliases:["ethereum","eth","ether","vitalik"],keywords:["smart contract","defi","nft","blockchain","eth gas"],related:["bitcoin","solana"]},{id:"solana",type:"crypto",name:"Solana",aliases:["solana","sol token"],keywords:["blockchain","defi","nft","solana network"],related:["bitcoin","ethereum"]},{id:"CN",type:"country",name:"China",aliases:["china","chinese","beijing","prc","xi jinping"],keywords:["trade war","tariff","ccp","pla","taiwan strait","south china sea","yuan","rmb"],related:["TW","TSM","BABA"]},{id:"TW",type:"country",name:"Taiwan",aliases:["taiwan","taiwanese","taipei","roc"],keywords:["strait","semiconductor","chip","invasion","blockade"],related:["CN","TSM","NVDA"]},{id:"RU",type:"country",name:"Russia",aliases:["russia","russian","moscow","kremlin","putin","vladimir putin"],keywords:["sanctions","ukraine","war","gas","oil","nato","nuclear"],related:["UA","CL=F","NG=F"]},{id:"UA",type:"country",name:"Ukraine",aliases:["ukraine","ukrainian","kyiv","kiev","zelenskyy","zelensky"],keywords:["war","invasion","grain","nato","aid","defense"],related:["RU","CL=F","GC=F"]},{id:"IR",type:"country",name:"Iran",aliases:["iran","iranian","tehran","khamenei","irgc"],keywords:["sanctions","nuclear","oil","strait of hormuz","proxy","hezbollah","houthi"],related:["IL","CL=F","SA"]},{id:"IL",type:"country",name:"Israel",aliases:["israel","israeli","tel aviv","jerusalem","netanyahu","idf"],keywords:["gaza","hamas","hezbollah","iran","defense","war","middle east"],related:["IR","CL=F"]},{id:"SA",type:"country",name:"Saudi Arabia",aliases:["saudi","saudi arabia","riyadh","mbs","aramco"],keywords:["opec","oil","production","cut","crude","energy"],related:["CL=F","IR","XOM"]},{id:"AE",type:"country",name:"UAE",aliases:["uae","united arab emirates","emirates","abu dhabi","dubai","mbz"],keywords:["oil","trade","g42","ai","logistics","dp world"],related:["SA","CL=F","MSFT"]},{id:"QA",type:"country",name:"Qatar",aliases:["qatar","doha","al thani"],keywords:["lng","gas","mediator","hamas","al udeid","energy"],related:["NG=F","XOM","US"]},{id:"TR",type:"country",name:"Turkey",aliases:["turkey","turkiye","erdogan","ankara"],keywords:["nato","bosphorus","drone","bayraktar","kurds","lira"],related:["RU","UA","RHM.DE"]},{id:"EG",type:"country",name:"Egypt",aliases:["egypt","cairo","sisi"],keywords:["suez canal","gaza","rafah","imf","debt","tourism"],related:["IL","SA","AE"]}];function St(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function kt(r){const e=new Map,t=new Map,s=new Map,i=new Map,n=new Map;for(const a of r){e.set(a.id,a);for(const o of a.aliases)t.set(o.toLowerCase(),a.id);t.set(a.id.toLowerCase(),a.id),t.set(a.name.toLowerCase(),a.id);for(const o of a.keywords){const l=o.toLowerCase();s.has(l)||s.set(l,new Set),s.get(l).add(a.id)}if(a.sector){const o=a.sector.toLowerCase();i.has(o)||i.set(o,new Set),i.get(o).add(a.id)}n.has(a.type)||n.set(a.type,new Set),n.get(a.type).add(a.id)}return{byId:e,byAlias:t,byKeyword:s,bySector:i,byType:n}}let le=null;function B(){return le||(le=kt(xt)),le}function Lt(r){const e=B(),t=e.byId.get(r);return t!=null&&t.related?t.related.map(s=>e.byId.get(s)).filter(s=>!!s):[]}function vt(r){const e=B(),t=[],s=new Set,i=r.toLowerCase();for(const[n,a]of e.byAlias){if(n.length<3)continue;const o=new RegExp(`\\b${St(n)}\\b`,"gi");let l;for(;(l=o.exec(r))!==null;)if(!s.has(a)){t.push({entityId:a,matchedText:l[0],matchType:"alias",confidence:n.length>4?.95:.85,position:l.index}),s.add(a);break}}for(const[n,a]of e.byKeyword)if(!(n.length<3)&&i.includes(n))for(const o of a){if(s.has(o))continue;const l=i.indexOf(n);t.push({entityId:o,matchedText:n,matchType:"keyword",confidence:.7,position:l}),s.add(o)}return t.sort((n,a)=>a.confidence-n.confidence||n.position-a.position)}function Ot(r){const t=B().byId.get(r);return(t==null?void 0:t.name)??r}function Re(r){return vt(r).map(t=>({entityId:t.entityId,name:Ot(t.entityId),matchedText:t.matchedText,matchType:t.matchType,confidence:t.confidence}))}function Ct(r){var a;const e=Re(r.primaryTitle),t=new Map;for(const o of e)t.has(o.entityId)||t.set(o.entityId,o);if(r.allItems&&r.allItems.length>1)for(const o of r.allItems.slice(0,5)){const l=Re(o.title);for(const c of l)t.has(c.entityId)||(c.confidence*=.9,t.set(c.entityId,c))}const s=Array.from(t.values()).sort((o,l)=>l.confidence-o.confidence),i=(a=s[0])==null?void 0:a.entityId,n=new Set;for(const o of s){const l=Lt(o.entityId);for(const c of l)n.add(c.id)}return{clusterId:r.id,title:r.primaryTitle,entities:s,primaryEntity:i,relatedEntityIds:Array.from(n)}}function Tt(r){const e=new Map;for(const t of r){const s=Ct(t);e.set(t.id,s)}return e}function It(r,e){const s=B().byId.get(r);if(!s)return[];const i=new Set([r,...s.related??[]]),n=[];for(const[a,o]of e){const l=o.entities.find(d=>d.entityId===r);if(l){n.push({clusterId:a,title:o.title,confidence:l.confidence});continue}const c=o.entities.find(d=>i.has(d.entityId));c&&n.push({clusterId:a,title:o.title,confidence:c.confidence*.8})}return n.sort((a,o)=>o.confidence-a.confidence)}function Pt(r,e){return It(r,e)}class Ne extends Error{constructor(t){super("Validation failed");U(this,"violations");this.name="ValidationError",this.violations=t}}class Rt extends Error{constructor(t,s,i){super(s);U(this,"statusCode");U(this,"body");this.name="ApiError",this.statusCode=t,this.body=i}}class Nt{constructor(e,t){U(this,"baseURL");U(this,"fetchFn");U(this,"defaultHeaders");this.baseURL=e.replace(/\/+$/,""),this.fetchFn=(t==null?void 0:t.fetch)??globalThis.fetch,this.defaultHeaders={...t==null?void 0:t.defaultHeaders}}async getRiskScores(e,t){const i=this.baseURL+"/api/intelligence/v1/get-risk-scores",n={"Content-Type":"application/json",...this.defaultHeaders,...t==null?void 0:t.headers},a=await this.fetchFn(i,{method:"POST",headers:n,body:JSON.stringify(e),signal:t==null?void 0:t.signal});return a.ok?await a.json():this.handleError(a)}async getPizzintStatus(e,t){const i=this.baseURL+"/api/intelligence/v1/get-pizzint-status",n={"Content-Type":"application/json",...this.defaultHeaders,...t==null?void 0:t.headers},a=await this.fetchFn(i,{method:"POST",headers:n,body:JSON.stringify(e),signal:t==null?void 0:t.signal});return a.ok?await a.json():this.handleError(a)}async classifyEvent(e,t){const i=this.baseURL+"/api/intelligence/v1/classify-event",n={"Content-Type":"application/json",...this.defaultHeaders,...t==null?void 0:t.headers},a=await this.fetchFn(i,{method:"POST",headers:n,body:JSON.stringify(e),signal:t==null?void 0:t.signal});return a.ok?await a.json():this.handleError(a)}async getCountryIntelBrief(e,t){const i=this.baseURL+"/api/intelligence/v1/get-country-intel-brief",n={"Content-Type":"application/json",...this.defaultHeaders,...t==null?void 0:t.headers},a=await this.fetchFn(i,{method:"POST",headers:n,body:JSON.stringify(e),signal:t==null?void 0:t.signal});return a.ok?await a.json():this.handleError(a)}async searchGdeltDocuments(e,t){const i=this.baseURL+"/api/intelligence/v1/search-gdelt-documents",n={"Content-Type":"application/json",...this.defaultHeaders,...t==null?void 0:t.headers},a=await this.fetchFn(i,{method:"POST",headers:n,body:JSON.stringify(e),signal:t==null?void 0:t.signal});return a.ok?await a.json():this.handleError(a)}async handleError(e){const t=await e.text();if(e.status===400)try{const s=JSON.parse(t);if(s.violations)throw new Ne(s.violations)}catch(s){if(s instanceof Ne)throw s}throw new Rt(e.status,`Request failed with status ${e.status}`,t)}}const Mt={critical:5,high:4,medium:3,low:2,info:1};new Nt("",{fetch:fetch.bind(globalThis)});function Ft(r){const e=r.filter(c=>c.threat);if(e.length===0)return{level:"info",category:"general",confidence:.3,source:"keyword"};let t="info",s=0;for(const c of e){const d=Mt[c.threat.level];d>s&&(s=d,t=c.threat.level)}const i=new Map;for(const c of e){const d=c.threat.category;i.set(d,(i.get(d)??0)+1)}let n="general",a=0;for(const[c,d]of i)d>a&&(a=d,n=c);let o=0,l=0;for(const c of e){const d=c.tier?6-Math.min(c.tier,5):1;o+=c.threat.confidence*d,l+=d}return{level:t,category:n,confidence:l>0?o/l:.5,source:"keyword"}}const Et=10080*60*1e3,$t=3,Me=1e3;function At(r){const t=[...r].sort((s,i)=>s.pubDate.getTime()-i.pubDate.getTime())[0];return`${t.pubDate.getTime()}-${t.title.slice(0,20).replace(/\W/g,"")}`}function Dt(r,e){if(r.length===0)return[];const t=r.map(l=>({...l,tier:l.tier??e(l.source)})),s=new Map,i=[],n=new Map;for(const l of t){const c=mt(l.title);s.set(l.title,c),i.push(c)}for(let l=0;l<i.length;l++){const c=i[l];for(const d of c){const u=n.get(d);u?u.push(l):n.set(d,[l])}}const a=[],o=new Set;for(let l=0;l<t.length;l++){if(o.has(l))continue;const d=[t[l]];o.add(l);const u=i[l],g=new Set;for(const f of u){const w=n.get(f);if(w)for(const k of w)k>l&&g.add(k)}const p=Array.from(g).sort((f,w)=>f-w);for(const f of p){if(o.has(f))continue;const w=t[f],k=i[f];yt(u,k)>=rt&&(d.push(w),o.add(f))}a.push(d)}return a.map(l=>{var C;const c=[...l].sort((S,T)=>{const h=S.tier-T.tier;return h!==0?h:T.pubDate.getTime()-S.pubDate.getTime()}),d=c[0],u=l.map(S=>S.pubDate.getTime()),g=c.slice(0,3).map(S=>({name:S.source,tier:S.tier,url:S.link})),p=Ft(l),f=l.filter(S=>S.lat!=null&&S.lon!=null);let w,k;if(f.length>0){const S=new Map;for(const h of f){const y=`${h.lat},${h.lon}`,v=S.get(y)||{lat:h.lat,lon:h.lon,count:0};v.count++,S.set(y,v)}const T=Array.from(S.values()).sort((h,y)=>y.count-h.count)[0];w=T.lat,k=T.lon}return{id:At(l),primaryTitle:d.title,primarySource:d.source,primaryLink:d.link,sourceCount:l.length,topSources:g,allItems:l,firstSeen:new Date(Math.min(...u)),lastUpdated:new Date(Math.max(...u)),isAlert:l.some(S=>S.isAlert),monitorColor:(C=l.find(S=>S.monitorColor))==null?void 0:C.monitorColor,threat:p,...w!=null&&{lat:w,lon:k},lang:d.lang}}).sort((l,c)=>c.lastUpdated.getTime()-l.lastUpdated.getTime())}function jt(r){var t;const e=new Map;for(const s of r){const i=s.primaryTitle.toLowerCase();for(const n of pt){if(Te.has(n)||!Pe(i,n))continue;const a=((t=s.velocity)==null?void 0:t.sourcesPerHour)??0;e.set(n,(e.get(n)??0)+a+s.sourceCount)}}return e}function Fe(r,e){return r.filter(t=>e-t.timestamp<=Et)}function Vt(r){return r.length===0?0:r.reduce((t,s)=>t+s.velocity,0)/r.length}function Ht(r,e,t){var i;const s=[];for(const n of r){const a=[n.primaryTitle,...((i=n.allItems)==null?void 0:i.map(c=>c.title))??[]].map(c=>c.toLowerCase()).filter(Boolean),o=a.some(c=>Ie(c,ft)),l=a.some(c=>Ie(c,ht));if(o&&l){const c=j("flow_drop",n.id,n.sourceCount);e(c)||(t(c),s.push({id:D(),type:"flow_drop",title:"Pipeline Flow Drop",description:`"${n.primaryTitle.slice(0,70)}..." indicates reduced flow or disruption`,confidence:Math.min(.9,.4+n.sourceCount/10),timestamp:new Date,data:{newsVelocity:n.sourceCount,relatedTopics:["pipeline","flow"]}}))}}return s}function Kt(r,e,t,s){const i=[],a=Date.now();for(const o of r){if(!o.allItems||o.allItems.length<3)continue;const l=o.allItems.filter(d=>a-d.pubDate.getTime()<36e5);if(l.length<3)continue;const c=new Set;for(const d of l){const u=e(d.source);c.add(u)}if(c.size>=3){const d=Array.from(c).filter(g=>g!=="other"),u=j("convergence",o.id,c.size);!t(u)&&d.length>=3&&(s(u),i.push({id:D(),type:"convergence",title:"Source Convergence",description:`"${o.primaryTitle.slice(0,50)}..." reported by ${d.join(", ")} (${l.length} sources in 30m)`,confidence:Math.min(.95,.6+c.size*.1),timestamp:new Date,data:{newsVelocity:l.length,relatedTopics:d}}))}}return i}function Ut(r,e,t,s){const i=[],n=["wire","gov","intel"];for(const a of r){if(!a.allItems||a.allItems.length<3)continue;const o=new Set;for(const l of a.allItems){const c=e(l.source);n.includes(c)&&o.add(c)}if(o.size===3){const l=j("triangulation",a.id,3);t(l)||(s(l),i.push({id:D(),type:"triangulation",title:"Intel Triangulation",description:`Wire + Gov + Intel aligned: "${a.primaryTitle.slice(0,45)}..."`,confidence:.9,timestamp:new Date,data:{newsVelocity:a.sourceCount,relatedTopics:Array.from(o)}}))}}return i}function zt(r,e,t,s,i,n,a){var T;const o=[],l=Date.now(),c=jt(r),d=Ht(r,n,a),u=d.length,g=B(),p=Tt(r),f=(s==null?void 0:s.topicVelocityHistory)??new Map,w=new Map,k=new Set([...f.keys(),...c.keys()]);for(const h of k){const v=[...Fe(f.get(h)??[],l),{timestamp:l,velocity:c.get(h)??0}];v.length>Me&&v.splice(0,v.length-Me),w.set(h,v)}const C={newsVelocity:c,marketChanges:new Map(t.map(h=>[h.symbol,h.change??0])),predictionChanges:new Map(e.map(h=>[h.title.slice(0,50),h.yesPrice])),topicVelocityHistory:w,timestamp:l};if(!s)return{signals:[],snapshot:C};for(const h of e){const y=h.title.slice(0,50),v=s.predictionChanges.get(y);if(v!==void 0){const b=Math.abs(h.yesPrice-v);if(b>=lt){const O=bt(h.title),L=O.reduce((F,J)=>F+(c.get(J)??0),0),x=j("prediction_leads_news",y,b);L<Ce&&!n(x)&&(a(x),o.push({id:D(),type:"prediction_leads_news",title:"Prediction Market Shift",description:`"${h.title.slice(0,60)}..." moved ${b>0?"+":""}${b.toFixed(1)}% with low news coverage`,confidence:Math.min(.9,.5+b/20),timestamp:new Date,data:{predictionShift:b,newsVelocity:L,relatedTopics:O}}))}}}for(const[h,y]of c){if(Te.has(h))continue;const v=Fe(f.get(h)??[],l),b=Vt(v),O=y>Ce*2,L=b>0?y>b*$t:O;if(!O||!L)continue;const x=b>0?y/b:0,F=j("velocity_spike",h,y);if(!n(F)){a(F);const J=b>0?`${b.toFixed(1)} baseline (${x.toFixed(1)}x)`:"cold-start baseline";o.push({id:D(),type:"velocity_spike",title:"News Velocity Spike",description:`"${h}" coverage surging: ${y.toFixed(1)} activity score vs ${J}`,confidence:Math.min(.9,.45+(x>0?x/8:y/18)),timestamp:new Date,data:{newsVelocity:y,relatedTopics:[h],baseline:b,multiplier:b>0?x:void 0,explanation:b>0?`Velocity ${y.toFixed(1)} is ${x.toFixed(1)}x above baseline ${b.toFixed(1)}`:`Velocity ${y.toFixed(1)} exceeded cold-start threshold`}})}}for(const h of t){const y=Math.abs(h.change??0);if(y<ct)continue;const v=g.byId.get(h.symbol),b=Pt(h.symbol,p);if(b.length>0){const O=b[0],L=j("explained_market_move",h.symbol,y);if(!n(L)){a(L);const x=h.change>0?"+":"";o.push({id:D(),type:"explained_market_move",title:"Market Move Explained",description:`${h.name} ${x}${h.change.toFixed(2)}% correlates with: "${O.title.slice(0,60)}..."`,confidence:Math.min(.9,.5+b.length*.1+y/20),timestamp:new Date,data:{marketChange:h.change,newsVelocity:b.length,correlatedEntities:[h.symbol],correlatedNews:b.map(F=>F.clusterId),explanation:`${b.length} related news item${b.length>1?"s":""} found`}})}}else{const O=Array.from(c.entries()).filter(([x])=>h.name.toLowerCase().includes(x)||x.includes(h.symbol.toLowerCase())).reduce((x,[,F])=>x+F,0),L=j("silent_divergence",h.symbol,y);if(O<2&&!n(L)){a(L);const x=v?[h.symbol,h.name,...((T=v.keywords)==null?void 0:T.slice(0,2))??[]].join(", "):h.symbol;o.push({id:D(),type:"silent_divergence",title:"Silent Divergence",description:`${h.name} moved ${h.change>0?"+":""}${h.change.toFixed(2)}% - no news found for: ${x}`,confidence:Math.min(.8,.4+y/10),timestamp:new Date,data:{marketChange:h.change,newsVelocity:O,explanation:`Searched: ${x}`}})}}}for(const h of t){if(!ut.has(h.symbol))continue;const y=h.change??0;if(y>=dt){const v=Array.from(c.entries()).filter(([O])=>h.name.toLowerCase().includes(O)||O.includes(h.symbol.toLowerCase())).reduce((O,[,L])=>O+L,0),b=j("flow_price_divergence",h.symbol,y);v<2&&u===0&&!n(b)&&(a(b),o.push({id:D(),type:"flow_price_divergence",title:"Flow/Price Divergence",description:`${h.name} up ${y.toFixed(2)}% without pipeline flow news`,confidence:Math.min(.85,.4+y/8),timestamp:new Date,data:{marketChange:y,newsVelocity:v,relatedTopics:["pipeline",h.display]}}))}}return o.push(...Kt(r,i,n,a)),o.push(...Ut(r,i,n,a)),o.push(...d),{signals:o.filter((h,y)=>o.findIndex(v=>v.type===h.type)===y).filter(h=>h.confidence>=.6),snapshot:C}}let ce=null;const te=new Set;function _t(r){return te.has(r)}function Gt(r){te.add(r),setTimeout(()=>te.delete(r),1800*1e3)}self.onmessage=r=>{const e=r.data;switch(e.type){case"cluster":{const t=e.items.map(a=>({...a,pubDate:new Date(a.pubDate)})),i=Dt(t,a=>e.sourceTiers[a]??4),n={type:"cluster-result",id:e.id,clusters:i};self.postMessage(n);break}case"correlation":{const t=e.clusters.map(o=>({...o,firstSeen:new Date(o.firstSeen),lastUpdated:new Date(o.lastUpdated),allItems:o.allItems.map(l=>({...l,pubDate:new Date(l.pubDate)}))})),s=o=>e.sourceTypes[o]??"other",{signals:i,snapshot:n}=zt(t,e.predictions,e.markets,ce,s,_t,Gt);ce=n;const a={type:"correlation-result",id:e.id,signals:i};self.postMessage(a);break}case"reset":{ce=null,te.clear();break}}},self.postMessage({type:"ready"})})();
